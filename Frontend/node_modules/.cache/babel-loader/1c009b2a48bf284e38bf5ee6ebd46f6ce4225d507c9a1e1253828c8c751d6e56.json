{"ast":null,"code":"var _jsxFileName = \"D:\\\\projectSem2BullXit\\\\ProjectSem2\\\\Frontend\\\\src\\\\components\\\\pages\\\\CartPage.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState, useEffect, useCallback } from 'react';\nimport { Link } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faShoppingCart, faArrowLeft, faPlus } from '@fortawesome/free-solid-svg-icons';\nimport CartItem from '../common/CartItem';\nimport { CartContext } from '../../App';\nimport PayPalButton from '../paypal/PayPalButton';\nimport '../../styles/CartPage.css';\nimport '../../styles/PayPalButton.css';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CartPage = () => {\n  _s();\n  const {\n    cartItems,\n    setCartItems\n  } = useContext(CartContext);\n  const [processingOrder, setProcessingOrder] = useState(false);\n  const [showCheckout, setShowCheckout] = useState(false);\n  const [addresses, setAddresses] = useState([]);\n  const [selectedAddressId, setSelectedAddressId] = useState('');\n  const [showAddressForm, setShowAddressForm] = useState(false);\n  const [paymentMethod, setPaymentMethod] = useState('CASH_ON_DELIVERY');\n  const [newAddress, setNewAddress] = useState({\n    street: '',\n    city: '',\n    state: '',\n    zipCode: '',\n    country: ''\n  });\n  const [customerId, setCustomerId] = useState(null);\n  useEffect(() => {\n    const storedUser = localStorage.getItem('currentUser');\n    if (storedUser) {\n      try {\n        const userData = JSON.parse(storedUser);\n        if (userData && userData.customerId) {\n          setCustomerId(userData.customerId);\n          console.log('Customer ID loaded from localStorage:', userData.customerId);\n        } else {\n          console.error('customerId not found in userData from localStorage');\n          // Handle missing customerId, e.g., redirect to login or show an error\n        }\n      } catch (error) {\n        console.error('Error parsing currentUser from localStorage:', error);\n        // Handle parsing error\n      }\n    } else {\n      console.error('currentUser not found in localStorage');\n      // Handle user not logged in, e.g., redirect to login or show an error\n    }\n  }, []); // Empty dependency array ensures this runs once on mount\n\n  // Calculate total price\n  const calculateTotal = () => {\n    return cartItems.filter(item => item.selected).reduce((sum, item) => {\n      const itemPrice = typeof item.price === 'string' ? parseInt(item.price.replace(/\\D/g, '')) : item.price;\n      return sum + item.quantity * itemPrice;\n    }, 0);\n  };\n  const total = calculateTotal();\n\n  // Handle select all\n  const handleSelectAll = e => {\n    const checked = e.target.checked;\n    setCartItems(prev => prev.map(item => ({\n      ...item,\n      selected: checked\n    })));\n  };\n\n  // Are all items selected?\n  const allSelected = cartItems.length > 0 && cartItems.every(item => item.selected);\n\n  // Number of selected items\n  const selectedCount = cartItems.filter(item => item.selected).length;\n\n  // Fetch customer addresses from the backend\n  const fetchAddresses = useCallback(async () => {\n    if (!customerId) return; // Don't fetch if customerId isn't loaded yet\n    try {\n      const response = await axios.get(`http://localhost:8080/api/checkout/${customerId}/addresses`);\n      setAddresses(response.data);\n      if (response.data.length > 0 && !selectedAddressId) {\n        // Also check if selectedAddressId is not already set\n        setSelectedAddressId(response.data[0].id);\n      }\n    } catch (error) {\n      console.error('Error fetching addresses:', error);\n      alert('Failed to load addresses. Please try again.');\n    }\n  }, [customerId, selectedAddressId]); // Added selectedAddressId to prevent re-selecting if already set by user\n\n  useEffect(() => {\n    if (showCheckout && customerId) {\n      // Ensure customerId is loaded before fetching\n      fetchAddresses();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps \n  }, [showCheckout, customerId, fetchAddresses]); // fetchAddresses is now stable due to useCallback\n\n  // Handle address form input changes\n  const handleAddressChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setNewAddress(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // Payment method handling functions can be added here if needed\n\n  // Handle adding a new address\n  const handleAddAddress = async e => {\n    e.preventDefault();\n    try {\n      setProcessingOrder(true);\n      const response = await axios.post(`http://localhost:8080/api/checkout/${customerId}/address`, newAddress);\n\n      // Add the new address to the list and select it\n      setAddresses(prev => [...prev, response.data]);\n      setSelectedAddressId(response.data.id);\n\n      // Reset the form and hide it\n      setNewAddress({\n        street: '',\n        city: '',\n        state: '',\n        zipCode: '',\n        country: ''\n      });\n      setShowAddressForm(false);\n    } catch (error) {\n      console.error('Error adding address:', error);\n      alert('Failed to add address. Please try again.');\n    } finally {\n      setProcessingOrder(false);\n    }\n  };\n\n  // Handle proceeding to checkout\n  const handleProceedToCheckout = () => {\n    const selected = cartItems.filter(item => item.selected);\n    if (selected.length === 0) {\n      alert(\"Please select products to checkout!\");\n    } else {\n      setShowCheckout(true);\n    }\n  };\n\n  // Handle checkout\n  const handleCheckout = async () => {\n    // If PayPal is selected, the PayPal button will handle the checkout process\n    if (paymentMethod === 'PAYPAL') {\n      return;\n    }\n    setProcessingOrder(true);\n    try {\n      console.log('Sending checkout request with:', {\n        customerId,\n        paymentMethod\n      });\n\n      // Send the payment method along with the request\n      const url = `http://localhost:8080/api/checkout/${customerId}/complete`;\n      await axios.post(url, null, {\n        params: {\n          paymentMethod: paymentMethod\n        }\n      });\n      alert(`Order successful! Total: $${total.toLocaleString()}`);\n\n      // Remove checked out items from cart\n      setCartItems(prev => prev.filter(item => !item.selected));\n      setShowCheckout(false);\n    } catch (error) {\n      console.error('Error processing order:', error);\n      alert('Failed to process order. Please try again.');\n    } finally {\n      setProcessingOrder(false);\n    }\n  };\n\n  // Early return for empty cart\n  if (cartItems.length === 0 && !showCheckout) {\n    // also check !showCheckout to avoid flicker when order is placed\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-page empty-cart-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faShoppingCart\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 15\n          }, this), \" Your Cart is Empty\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"empty-cart-prompt\",\n        children: \"Looks like you haven't added anything to your cart yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        className: \"primary-button start-shopping-button\",\n        children: \"Start Shopping\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cart-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faShoppingCart\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }, this), \" Shopping Cart\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        className: \"continue-shopping-link\",\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faArrowLeft\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), \" Continue Shopping\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `cart-page-layout ${showCheckout ? 'checkout-active' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-items-column\",\n        children: [!showCheckout && cartItems.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-selection-controls\",\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"select-all-label\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                checked: allSelected,\n                onChange: handleSelectAll\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [allSelected ? 'Deselect All' : 'Select All', \" (\", selectedCount, \" item(s) selected)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-items-list-container\",\n            children: cartItems.map(item => /*#__PURE__*/_jsxDEV(CartItem, {\n              item: item,\n              setCartItems: setCartItems\n              // Pass any new props needed for enhanced CartItem UI\n            }, item.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), !showCheckout && cartItems.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-cart-message-inline\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Your cart is now empty. Thank you for your order!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 14\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"checkout-column\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checkout-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"checkout-box-title\",\n            children: \"Order Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"order-summary-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Subtotal (\", selectedCount, \" items):\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 18\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"$\", total.toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 65\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"summary-total\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Grand Total:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 44\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"$\", total.toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 70\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this), !showCheckout && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"primary-button proceed-checkout-button\",\n            onClick: handleProceedToCheckout,\n            disabled: selectedCount === 0 || processingOrder,\n            children: processingOrder ? 'Processing...' : `Proceed to Checkout (${selectedCount} item(s))`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 15\n          }, this), showCheckout && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shipping-address-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Shipping Address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 19\n              }, this), addresses.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"address-list\",\n                children: addresses.map(address => /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: `address-option ${selectedAddressId === address.id ? 'selected' : ''}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"radio\",\n                    name: \"selectedAddress\",\n                    value: address.id,\n                    checked: selectedAddressId === address.id,\n                    onChange: () => setSelectedAddressId(address.id)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 280,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"address-details-selectable\",\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: address.contactName || `Address ${address.id}`\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 288,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 288,\n                      columnNumber: 94\n                    }, this), address.street, \", \", address.city, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 289,\n                      columnNumber: 61\n                    }, this), address.state ? `${address.state}, ` : '', address.zipCode, \", \", address.country]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 287,\n                    columnNumber: 27\n                  }, this)]\n                }, address.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setShowAddressForm(!showAddressForm),\n                className: \"secondary-button add-address-button\",\n                children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: faPlus\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 21\n                }, this), \" \", showAddressForm ? 'Cancel New Address' : 'Add New Address']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 19\n              }, this), showAddressForm && /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: handleAddAddress,\n                className: \"new-address-form\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"Add New Shipping Address\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"contactName\",\n                    placeholder: \"Full Name / Contact Person\",\n                    value: newAddress.contactName || '',\n                    onChange: handleAddressChange,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 303,\n                    columnNumber: 51\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"street\",\n                    placeholder: \"Street Address\",\n                    value: newAddress.street,\n                    onChange: handleAddressChange,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 304,\n                    columnNumber: 51\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"city\",\n                    placeholder: \"City\",\n                    value: newAddress.city,\n                    onChange: handleAddressChange,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 305,\n                    columnNumber: 51\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"state\",\n                    placeholder: \"State / Province\",\n                    value: newAddress.state,\n                    onChange: handleAddressChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 306,\n                    columnNumber: 51\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"zipCode\",\n                    placeholder: \"Postal / Zip Code\",\n                    value: newAddress.zipCode,\n                    onChange: handleAddressChange,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 307,\n                    columnNumber: 51\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"country\",\n                    placeholder: \"Country\",\n                    value: newAddress.country,\n                    onChange: handleAddressChange,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 308,\n                    columnNumber: 51\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  className: \"primary-button save-address-button\",\n                  disabled: processingOrder,\n                  children: processingOrder ? 'Saving...' : 'Save Address'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"payment-method-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Payment Method\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"payment-options\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: `payment-option-card ${paymentMethod === 'CASH_ON_DELIVERY' ? 'selected' : ''}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"radio\",\n                    name: \"paymentMethod\",\n                    value: \"CASH_ON_DELIVERY\",\n                    checked: paymentMethod === 'CASH_ON_DELIVERY',\n                    onChange: () => setPaymentMethod('CASH_ON_DELIVERY')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 320,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"payment-option-content\",\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Cash on Delivery\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 329,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: \"Pay with cash upon delivery.\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 330,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 327,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: `payment-option-card ${paymentMethod === 'PAYPAL' ? 'selected' : ''}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"radio\",\n                    name: \"paymentMethod\",\n                    value: \"PAYPAL\",\n                    checked: paymentMethod === 'PAYPAL',\n                    onChange: () => setPaymentMethod('PAYPAL')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 334,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"payment-option-content\",\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"PayPal\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 343,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: \"Pay securely via PayPal.\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 344,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 341,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"checkout-actions-final\",\n              children: [paymentMethod === 'PAYPAL' ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"paypal-button-container-cart\",\n                children: /*#__PURE__*/_jsxDEV(PayPalButton, {\n                  totalAmount: total,\n                  customerId: customerId,\n                  addressId: selectedAddressId,\n                  disabled: !selectedAddressId || processingOrder || cartItems.filter(i => i.selected).length === 0,\n                  onSuccess: () => {\n                    alert('PayPal payment successful!');\n                    setCartItems(prev => prev.filter(item => !item.selected));\n                    setShowCheckout(false); // Go back to cart view, which should now be empty or show remaining items\n                  },\n                  onError: err => {\n                    console.error('PayPal Error:', err);\n                    alert('PayPal payment failed. Please try again or choose another payment method.');\n                  },\n                  onCancel: () => {\n                    alert('PayPal payment cancelled.');\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleCheckout,\n                disabled: !selectedAddressId || processingOrder || cartItems.filter(i => i.selected).length === 0,\n                className: \"primary-button place-order-button-final\",\n                children: processingOrder ? 'Processing...' : 'Place Order (Cash on Delivery)'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setShowCheckout(false),\n                className: \"secondary-button back-to-cart-summary-button\",\n                children: \"Back\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 206,\n    columnNumber: 5\n  }, this);\n};\n_s(CartPage, \"CRti+L4HwcWdEouCF8AlrKjI4zw=\");\n_c = CartPage;\nexport default CartPage;\nvar _c;\n$RefreshReg$(_c, \"CartPage\");","map":{"version":3,"names":["React","useContext","useState","useEffect","useCallback","Link","FontAwesomeIcon","faShoppingCart","faArrowLeft","faPlus","CartItem","CartContext","PayPalButton","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","CartPage","_s","cartItems","setCartItems","processingOrder","setProcessingOrder","showCheckout","setShowCheckout","addresses","setAddresses","selectedAddressId","setSelectedAddressId","showAddressForm","setShowAddressForm","paymentMethod","setPaymentMethod","newAddress","setNewAddress","street","city","state","zipCode","country","customerId","setCustomerId","storedUser","localStorage","getItem","userData","JSON","parse","console","log","error","calculateTotal","filter","item","selected","reduce","sum","itemPrice","price","parseInt","replace","quantity","total","handleSelectAll","e","checked","target","prev","map","allSelected","length","every","selectedCount","fetchAddresses","response","get","data","id","alert","handleAddressChange","name","value","handleAddAddress","preventDefault","post","handleProceedToCheckout","handleCheckout","url","params","toLocaleString","className","children","icon","fileName","_jsxFileName","lineNumber","columnNumber","to","type","onChange","onClick","disabled","address","contactName","onSubmit","placeholder","required","totalAmount","addressId","i","onSuccess","onError","err","onCancel","_c","$RefreshReg$"],"sources":["D:/projectSem2BullXit/ProjectSem2/Frontend/src/components/pages/CartPage.js"],"sourcesContent":["import React, { useContext, useState, useEffect, useCallback } from 'react';\nimport { Link } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faShoppingCart, faArrowLeft, faPlus } from '@fortawesome/free-solid-svg-icons';\nimport CartItem from '../common/CartItem';\nimport { CartContext } from '../../App';\nimport PayPalButton from '../paypal/PayPalButton';\nimport '../../styles/CartPage.css';\nimport '../../styles/PayPalButton.css';\nimport axios from 'axios';\n\nconst CartPage = () => {\n  const { cartItems, setCartItems } = useContext(CartContext);\n  const [processingOrder, setProcessingOrder] = useState(false);\n  const [showCheckout, setShowCheckout] = useState(false);\n  const [addresses, setAddresses] = useState([]);\n  const [selectedAddressId, setSelectedAddressId] = useState('');\n  const [showAddressForm, setShowAddressForm] = useState(false);\n  const [paymentMethod, setPaymentMethod] = useState('CASH_ON_DELIVERY');\n  const [newAddress, setNewAddress] = useState({\n    street: '',\n    city: '',\n    state: '',\n    zipCode: '',\n    country: ''\n  });\n\n  const [customerId, setCustomerId] = useState(null);\n\n  useEffect(() => {\n    const storedUser = localStorage.getItem('currentUser');\n    if (storedUser) {\n      try {\n        const userData = JSON.parse(storedUser);\n        if (userData && userData.customerId) {\n          setCustomerId(userData.customerId);\n          console.log('Customer ID loaded from localStorage:', userData.customerId);\n        } else {\n          console.error('customerId not found in userData from localStorage');\n          // Handle missing customerId, e.g., redirect to login or show an error\n        }\n      } catch (error) {\n        console.error('Error parsing currentUser from localStorage:', error);\n        // Handle parsing error\n      }\n    } else {\n      console.error('currentUser not found in localStorage');\n      // Handle user not logged in, e.g., redirect to login or show an error\n    }\n  }, []); // Empty dependency array ensures this runs once on mount\n\n  // Calculate total price\n  const calculateTotal = () => {\n    return cartItems\n      .filter(item => item.selected)\n      .reduce((sum, item) => {\n        const itemPrice = typeof item.price === 'string' \n          ? parseInt(item.price.replace(/\\D/g, ''))\n          : item.price;\n        return sum + (item.quantity * itemPrice);\n      }, 0);\n  };\n\n  const total = calculateTotal();\n\n  // Handle select all\n  const handleSelectAll = (e) => {\n    const checked = e.target.checked;\n    setCartItems(prev =>\n      prev.map(item => ({ ...item, selected: checked }))\n    );\n  };\n\n  // Are all items selected?\n  const allSelected = cartItems.length > 0 && cartItems.every(item => item.selected);\n\n  // Number of selected items\n  const selectedCount = cartItems.filter(item => item.selected).length;\n\n  // Fetch customer addresses from the backend\n  const fetchAddresses = useCallback(async () => {\n    if (!customerId) return; // Don't fetch if customerId isn't loaded yet\n    try {\n      const response = await axios.get(`http://localhost:8080/api/checkout/${customerId}/addresses`);\n      setAddresses(response.data);\n      if (response.data.length > 0 && !selectedAddressId) { // Also check if selectedAddressId is not already set\n        setSelectedAddressId(response.data[0].id);\n      }\n    } catch (error) {\n      console.error('Error fetching addresses:', error);\n      alert('Failed to load addresses. Please try again.');\n    }\n  }, [customerId, selectedAddressId]); // Added selectedAddressId to prevent re-selecting if already set by user\n\n  useEffect(() => {\n    if (showCheckout && customerId) { // Ensure customerId is loaded before fetching\n      fetchAddresses();\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps \n  }, [showCheckout, customerId, fetchAddresses]); // fetchAddresses is now stable due to useCallback\n\n  // Handle address form input changes\n  const handleAddressChange = (e) => {\n    const { name, value } = e.target;\n    setNewAddress(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // Payment method handling functions can be added here if needed\n\n  // Handle adding a new address\n  const handleAddAddress = async (e) => {\n    e.preventDefault();\n    try {\n      setProcessingOrder(true);\n      const response = await axios.post(\n        `http://localhost:8080/api/checkout/${customerId}/address`,\n        newAddress\n      );\n      \n      // Add the new address to the list and select it\n      setAddresses(prev => [...prev, response.data]);\n      setSelectedAddressId(response.data.id);\n      \n      // Reset the form and hide it\n      setNewAddress({\n        street: '',\n        city: '',\n        state: '',\n        zipCode: '',\n        country: ''\n      });\n      setShowAddressForm(false);\n    } catch (error) {\n      console.error('Error adding address:', error);\n      alert('Failed to add address. Please try again.');\n    } finally {\n      setProcessingOrder(false);\n    }\n  };\n\n  // Handle proceeding to checkout\n  const handleProceedToCheckout = () => {\n    const selected = cartItems.filter(item => item.selected);\n    if (selected.length === 0) {\n      alert(\"Please select products to checkout!\");\n    } else {\n      setShowCheckout(true);\n    }\n  };\n\n  // Handle checkout\n  const handleCheckout = async () => {\n    // If PayPal is selected, the PayPal button will handle the checkout process\n    if (paymentMethod === 'PAYPAL') {\n      return;\n    }\n    \n    setProcessingOrder(true);\n    \n    try {\n      console.log('Sending checkout request with:', {\n        customerId,\n        paymentMethod\n      });\n      \n      // Send the payment method along with the request\n      const url = `http://localhost:8080/api/checkout/${customerId}/complete`;\n      await axios.post(url, null, {\n        params: {\n          paymentMethod: paymentMethod\n        }\n      });\n      \n      alert(`Order successful! Total: $${total.toLocaleString()}`);\n      \n      // Remove checked out items from cart\n      setCartItems(prev => prev.filter(item => !item.selected));\n      setShowCheckout(false);\n    } catch (error) {\n      console.error('Error processing order:', error);\n      alert('Failed to process order. Please try again.');\n    } finally {\n      setProcessingOrder(false);\n    }\n  };\n\n  // Early return for empty cart\n  if (cartItems.length === 0 && !showCheckout) { // also check !showCheckout to avoid flicker when order is placed\n    return (\n      <div className=\"cart-page empty-cart-container\">\n        <div className=\"cart-header\">\n          <h1><FontAwesomeIcon icon={faShoppingCart} /> Your Cart is Empty</h1>\n        </div>\n        <p className=\"empty-cart-prompt\">Looks like you haven't added anything to your cart yet.</p>\n        <Link to=\"/\" className=\"primary-button start-shopping-button\">\n          Start Shopping\n        </Link>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"cart-page\">\n      <div className=\"cart-header\">\n        <h1><FontAwesomeIcon icon={faShoppingCart} /> Shopping Cart</h1>\n        <Link to=\"/\" className=\"continue-shopping-link\">\n          <FontAwesomeIcon icon={faArrowLeft} /> Continue Shopping\n        </Link>\n      </div>\n\n      <div className={`cart-page-layout ${showCheckout ? 'checkout-active' : ''}`}>\n        {/* --- Cart Items Column --- */}\n        <div className=\"cart-items-column\">\n          {!showCheckout && cartItems.length > 0 && (\n            <>\n              <div className=\"cart-selection-controls\">\n                <label className=\"select-all-label\">\n                  <input \n                    type=\"checkbox\" \n                    checked={allSelected} \n                    onChange={handleSelectAll} \n                  />\n                  <span>{allSelected ? 'Deselect All' : 'Select All'} ({selectedCount} item(s) selected)</span>\n                </label>\n                {/* Add a Clear Cart button if desired */}\n                {/* <button onClick={() => setCartItems([])} className=\"clear-cart-button\">Clear Cart</button> */}\n              </div>\n              <div className=\"cart-items-list-container\">\n                {cartItems.map(item => (\n                  <CartItem \n                    key={item.id} \n                    item={item} \n                    setCartItems={setCartItems} \n                    // Pass any new props needed for enhanced CartItem UI\n                  />\n                ))}\n              </div>\n            </>\n          )}\n          {/* Display a message if cart becomes empty during checkout (e.g. after successful PayPal) */}\n          {!showCheckout && cartItems.length === 0 && (\n             <div className=\"empty-cart-message-inline\">\n                <p>Your cart is now empty. Thank you for your order!</p>\n             </div>\n          )}\n        </div>\n\n        {/* --- Checkout Column (Order Summary, Address, Payment) --- */}\n        <div className=\"checkout-column\">\n          <div className=\"checkout-box\">\n            <h2 className=\"checkout-box-title\">Order Summary</h2>\n            <div className=\"order-summary-details\">\n              <p><span>Subtotal ({selectedCount} items):</span> <span>${total.toLocaleString()}</span></p>\n              {/* Add lines for Shipping, Taxes if applicable */}\n              {/* <p><span>Shipping:</span> <span>$5.00</span></p> */}\n              <p className=\"summary-total\"><span>Grand Total:</span> <span>${total.toLocaleString()}</span></p>\n            </div>\n\n            {!showCheckout && (\n              <button \n                className=\"primary-button proceed-checkout-button\" \n                onClick={handleProceedToCheckout}\n                disabled={selectedCount === 0 || processingOrder}\n              >\n                {processingOrder ? 'Processing...' : `Proceed to Checkout (${selectedCount} item(s))`}\n              </button>\n            )}\n\n            {showCheckout && (\n              <>\n                <div className=\"shipping-address-section\">\n                  <h3>Shipping Address</h3>\n                  {addresses.length > 0 && (\n                    <div className=\"address-list\">\n                      {addresses.map(address => (\n                        <label key={address.id} className={`address-option ${selectedAddressId === address.id ? 'selected' : ''}`}>\n                          <input \n                            type=\"radio\" \n                            name=\"selectedAddress\" \n                            value={address.id} \n                            checked={selectedAddressId === address.id} \n                            onChange={() => setSelectedAddressId(address.id)} \n                          />\n                          <div className=\"address-details-selectable\">\n                            <strong>{address.contactName || `Address ${address.id}`}</strong><br/>\n                            {address.street}, {address.city}<br/>\n                            {address.state ? `${address.state}, ` : ''}{address.zipCode}, {address.country}\n                          </div>\n                        </label>\n                      ))}\n                    </div>\n                  )}\n                  <button onClick={() => setShowAddressForm(!showAddressForm)} className=\"secondary-button add-address-button\">\n                    <FontAwesomeIcon icon={faPlus} /> {showAddressForm ? 'Cancel New Address' : 'Add New Address'}\n                  </button>\n                  {showAddressForm && (\n                    <form onSubmit={handleAddAddress} className=\"new-address-form\">\n                      <h4>Add New Shipping Address</h4>\n                      {/* Consider making these components for reusability */}\n                      <div className=\"form-group\"><input type=\"text\" name=\"contactName\" placeholder=\"Full Name / Contact Person\" value={newAddress.contactName || ''} onChange={handleAddressChange} required /></div>\n                      <div className=\"form-group\"><input type=\"text\" name=\"street\" placeholder=\"Street Address\" value={newAddress.street} onChange={handleAddressChange} required /></div>\n                      <div className=\"form-group\"><input type=\"text\" name=\"city\" placeholder=\"City\" value={newAddress.city} onChange={handleAddressChange} required /></div>\n                      <div className=\"form-group\"><input type=\"text\" name=\"state\" placeholder=\"State / Province\" value={newAddress.state} onChange={handleAddressChange} /></div>\n                      <div className=\"form-group\"><input type=\"text\" name=\"zipCode\" placeholder=\"Postal / Zip Code\" value={newAddress.zipCode} onChange={handleAddressChange} required /></div>\n                      <div className=\"form-group\"><input type=\"text\" name=\"country\" placeholder=\"Country\" value={newAddress.country} onChange={handleAddressChange} required /></div>\n                      <button type=\"submit\" className=\"primary-button save-address-button\" disabled={processingOrder}>\n                        {processingOrder ? 'Saving...' : 'Save Address'}\n                      </button>\n                    </form>\n                  )}\n                </div>\n\n                <div className=\"payment-method-section\">\n                  <h3>Payment Method</h3>\n                  <div className=\"payment-options\">\n                    <label className={`payment-option-card ${paymentMethod === 'CASH_ON_DELIVERY' ? 'selected' : ''}`}>\n                      <input \n                        type=\"radio\" \n                        name=\"paymentMethod\" \n                        value=\"CASH_ON_DELIVERY\" \n                        checked={paymentMethod === 'CASH_ON_DELIVERY'} \n                        onChange={() => setPaymentMethod('CASH_ON_DELIVERY')} \n                      />\n                      <div className=\"payment-option-content\">\n                        {/* <FontAwesomeIcon icon={faMoneyBillWave} className=\"payment-icon\" /> */}\n                        <strong>Cash on Delivery</strong>\n                        <p>Pay with cash upon delivery.</p>\n                      </div>\n                    </label>\n                    <label className={`payment-option-card ${paymentMethod === 'PAYPAL' ? 'selected' : ''}`}>\n                      <input \n                        type=\"radio\" \n                        name=\"paymentMethod\" \n                        value=\"PAYPAL\" \n                        checked={paymentMethod === 'PAYPAL'} \n                        onChange={() => setPaymentMethod('PAYPAL')} \n                      />\n                      <div className=\"payment-option-content\">\n                        {/* <FontAwesomeIcon icon={faPaypal} className=\"payment-icon\" /> */}\n                        <strong>PayPal</strong>\n                        <p>Pay securely via PayPal.</p>\n                      </div>\n                    </label>\n                  </div>\n                </div>\n\n                <div className=\"checkout-actions-final\">\n                  {paymentMethod === 'PAYPAL' ? (\n                    <div className=\"paypal-button-container-cart\">\n                      <PayPalButton \n                        totalAmount={total} \n                        customerId={customerId} \n                        addressId={selectedAddressId} \n                        disabled={!selectedAddressId || processingOrder || cartItems.filter(i => i.selected).length === 0}\n                        onSuccess={() => {\n                          alert('PayPal payment successful!');\n                          setCartItems(prev => prev.filter(item => !item.selected));\n                          setShowCheckout(false); // Go back to cart view, which should now be empty or show remaining items\n                        }}\n                        onError={(err) => {\n                          console.error('PayPal Error:', err);\n                          alert('PayPal payment failed. Please try again or choose another payment method.');\n                        }}\n                        onCancel={() => {\n                          alert('PayPal payment cancelled.');\n                        }}\n                      />\n                    </div>\n                  ) : (\n                    <button \n                      onClick={handleCheckout} \n                      disabled={!selectedAddressId || processingOrder || cartItems.filter(i => i.selected).length === 0}\n                      className=\"primary-button place-order-button-final\"\n                    >\n                      {processingOrder ? 'Processing...' : 'Place Order (Cash on Delivery)'}\n                    </button>\n                  )}\n                  <button onClick={() => setShowCheckout(false)} className=\"secondary-button back-to-cart-summary-button\">\n                    Back\n                  </button>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CartPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}